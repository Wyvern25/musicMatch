{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\Dave\\\\Desktop\\\\Coding_Class\\\\classProject3\\\\new_code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\Dave\\\\Desktop\\\\Coding_Class\\\\classProject3\\\\new_code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Dave\\\\Desktop\\\\Coding_Class\\\\classProject3\\\\new_code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Dave\\\\Desktop\\\\Coding_Class\\\\classProject3\\\\new_code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Dave\\\\Desktop\\\\Coding_Class\\\\classProject3\\\\new_code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Dave\\\\Desktop\\\\Coding_Class\\\\classProject3\\\\new_code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Dave\\\\Desktop\\\\Coding_Class\\\\classProject3\\\\new_code\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport { _loadPets, _deletePet, _createPet, _updatePet } from './services/PetService';\nimport { _signUp, _login } from './services/AuthService';\nimport Pet from './components/Pet';\nimport ShortPet from './components/ShortPet';\nimport Form from './components/Form';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.getToken = function () {\n      return localStorage.getItem('token');\n    };\n\n    _this.deletePet = function (event) {\n      //in button below add a data attribute with the pet's id\n      var id = event.target.getAttribute('data-id');\n      return _deletePet(id, _this.getToken()).then(function (deletedPetId) {\n        var pets = _this.state.pets.filter(function (pet) {\n          return pet._id !== deletedPetId;\n        });\n\n        _this.setState({\n          pets: pets\n        });\n      });\n    };\n\n    _this.createPet = function (event) {\n      event.preventDefault();\n      var name = event.target.children[0].value;\n      var type = event.target.children[1].value;\n      return _createPet(name, type, _this.getToken()).then(function (rj) {\n        var pets = [].concat(_toConsumableArray(_this.state.pets), [rj]);\n\n        _this.setState({\n          pets: pets\n        });\n      });\n    };\n\n    _this.updatePet = function (event) {\n      event.preventDefault();\n      var form = event.target;\n      var updatedId = _this.state.edit_id;\n      var name = form.children[0].value;\n      var type = form.children[1].value;\n      return _updatePet(updatedId, name, type, _this.getToken()).then(function (updatedPet) {\n        var pets = _this.state.pets.map(function (oldPet) {\n          //if the pet in this.state.pets is not the pet we updated then leave it alone\n          if (oldPet._id !== updatedId) return oldPet;else return updatedPet;\n        });\n\n        _this.setState({\n          pets: pets\n        });\n      });\n    };\n\n    _this.editPet = function (event) {\n      event.preventDefault();\n      var name = event.target.getAttribute('data-name');\n      var type = event.target.getAttribute('data-type');\n\n      _this.setState({\n        edit_id: event.target.getAttribute('data-id')\n      }, function () {\n        var form = document.querySelector('#editForm');\n        form.children[0].value = name;\n        form.children[1].value = type;\n      });\n    };\n\n    _this.hideEditForm = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        edit_id: \"\"\n      });\n    };\n\n    _this.signUp = function (event) {\n      event.preventDefault();\n      var inputs = event.target.children;\n      var username = inputs[0].value;\n      var password = inputs[2].value;\n      var passwordConf = inputs[4].value;\n\n      if (password === passwordConf) {\n        return _signUp(username, password).then(function (res) {\n          // this.setState({ userID })\n          console.log(res);\n          alert(res.message);\n        });\n      } else {\n        alert('your password and password confirmation have to match!');\n      }\n    };\n\n    _this.login = function (event) {\n      event.preventDefault();\n      var inputs = event.target.children;\n      var username = inputs[0].value;\n      var password = inputs[2].value;\n      return _login(username, password).then(function (res) {\n        if (res.token) {\n          _this.setState({\n            logged_in: true\n          }, function () {\n            localStorage.setItem('token', res.token);\n            this.setState({\n              name: username\n            });\n          });\n        } else {\n          alert('you were not logged in');\n        }\n      });\n    };\n\n    _this.logout = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        logged_in: false\n      }, function () {\n        localStorage.removeItem('token');\n      });\n\n      _this.setState({\n        name: 'Welcome',\n        show_log_in: false\n      });\n    };\n\n    _this.show_log_in = function (event) {\n      event.preventDefault();\n\n      if (_this.state.show_log_in == false) {\n        _this.setState({\n          show_log_in: true\n        });\n      } else {\n        _this.setState({\n          show_log_in: false\n        });\n      }\n\n      _this.setState({\n        show_sign_up: false\n      });\n    };\n\n    _this.show_sign_up = function (event) {\n      event.preventDefault();\n\n      if (_this.state.show_sign_up == false) {\n        _this.setState({\n          show_sign_up: true\n        });\n      } else {\n        _this.setState({\n          show_sign_up: false\n        });\n      }\n\n      _this.setState({\n        show_log_in: false\n      });\n    };\n\n    _this.state = {\n      pets: [{\n        _id: 1,\n        name: 'fido'\n      }, {\n        _id: 2,\n        name: 'snowflake'\n      }],\n      name: 'Welcome',\n      edit_id: '',\n      logged_in: false,\n      show_sign_up: false,\n      show_log_in: false,\n      countup: 0\n    }; // this.editPet = this.editPet.bind(this);\n\n    return _this;\n  } // deletePet() {\n  //   alert('hi');\n  // }\n\n\n  _createClass(App, [{\n    key: \"switchImage\",\n    value: function switchImage() {\n      if (this.state.countup < 5) {\n        this.setState({\n          countup: this.state.countup + 1\n        });\n      } else {\n        this.setState({\n          countup: 0\n        });\n      }\n\n      return this.countup;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      setInterval(this.switchImage, 1000);\n      return _loadPets().then(function (resultingJSON) {\n        return _this2.setState({\n          pets: resultingJSON\n        });\n      });\n    }\n    /*\n    componentDidMount () {\n      setInterval((function() {\n        this.setState({\n          currentImage: this.getRandomImageId()\n        });\n      })(), 5000)\n    }\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, this.state.countup), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, this.state.name), React.createElement(\"div\", {\n        class: \"nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, !this.state.logged_in && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"showsignup\",\n        onSubmit: this.show_sign_up,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"Sign Up\"))), this.state.show_sign_up && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Sign Up\"), React.createElement(\"form\", {\n        id: \"signUpForm\",\n        onSubmit: this.signUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"put in a username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"put in a password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"confirm your password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \"Confirm\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"showlogin\",\n        onSubmit: this.show_log_in,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, \"Log In\"))), this.state.show_log_in && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \"Log In\"), React.createElement(\"form\", {\n        id: \"logInForm\",\n        onSubmit: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"put in a username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"put in a password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, \"Confirm\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      })), this.state.logged_in && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, \"Sign Out\"), React.createElement(\"form\", {\n        id: \"logOutForm\",\n        onSubmit: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, \"Log Out\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }))), this.state.logged_in && this.state.pets.map(function (x) {\n        return React.createElement(Pet, {\n          _id: x._id,\n          name: x.name,\n          type: x.type,\n          delete: _this3.deletePet,\n          edit: _this3.editPet,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297\n          },\n          __self: this\n        });\n      }), !this.state.logged_in && this.state.pets.map(function (x) {\n        return React.createElement(ShortPet, {\n          _id: x._id,\n          name: x.name,\n          type: x.type,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        });\n      }), this.state.logged_in && React.createElement(Form, {\n        func: this.createPet,\n        submitButton: \"make pet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }), this.state.edit_id !== \"\" && this.state.logged_in && React.createElement(Form, {\n        cssId: \"editForm\",\n        func: this.updatePet,\n        submitButton: \"update pet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }), this.state.edit_id !== \"\" && this.state.logged_in && React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.hideEditForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"hide edit form\")));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Dave/Desktop/Coding_Class/classProject3/new_code/client/src/App.js"],"names":["React","Component","_loadPets","_deletePet","_createPet","_updatePet","_signUp","_login","Pet","ShortPet","Form","App","getToken","localStorage","getItem","deletePet","event","id","target","getAttribute","then","deletedPetId","pets","state","filter","pet","_id","setState","createPet","preventDefault","name","children","value","type","rj","updatePet","form","updatedId","edit_id","updatedPet","map","oldPet","editPet","document","querySelector","hideEditForm","signUp","inputs","username","password","passwordConf","res","console","log","alert","message","login","token","logged_in","setItem","logout","removeItem","show_log_in","show_sign_up","countup","setInterval","switchImage","resultingJSON","x"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport { _loadPets, _deletePet, _createPet, _updatePet } from './services/PetService';\nimport { _signUp, _login } from './services/AuthService';\nimport Pet from './components/Pet';\nimport ShortPet from './components/ShortPet';\nimport Form from './components/Form';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      pets: [{ _id: 1, name: 'fido' }, { _id: 2, name: 'snowflake' }],\n      name: 'Welcome',\n      edit_id: '',\n      logged_in: false,\n      show_sign_up: false,\n      show_log_in: false,\n      countup: 0\n\n    }\n\n    // this.editPet = this.editPet.bind(this);\n  }\n\n  // deletePet() {\n  //   alert('hi');\n  // }\n\n  getToken = () => {\n    return localStorage.getItem('token');\n  }\n\n  deletePet = (event) => {\n\n    //in button below add a data attribute with the pet's id\n\n    var id = event.target.getAttribute('data-id');\n\n    return _deletePet(id, this.getToken()).then(deletedPetId => {\n\n      let pets = this.state.pets.filter(pet => pet._id !== deletedPetId)\n\n      this.setState({ pets })\n    })\n\n  }\n\n  createPet = (event) => {\n    event.preventDefault();\n\n    let name = event.target.children[0].value;\n    let type = event.target.children[1].value;\n\n    return _createPet(name, type, this.getToken()).then(rj => {\n      let pets = [...this.state.pets, rj];\n      this.setState({ pets })\n    })\n  }\n\n  updatePet = (event) => {\n    event.preventDefault();\n\n    let form = event.target;\n\n    let updatedId = this.state.edit_id;\n    let name = form.children[0].value;\n    let type = form.children[1].value;\n\n    return _updatePet(updatedId, name, type, this.getToken()).then(updatedPet => {\n\n      let pets = this.state.pets.map(oldPet => {\n        //if the pet in this.state.pets is not the pet we updated then leave it alone\n        if (oldPet._id !== updatedId) return oldPet;\n        else return updatedPet;\n      })\n\n      this.setState({ pets })\n    })\n  }\n\n  editPet = (event) => {\n    event.preventDefault();\n\n    let name = event.target.getAttribute('data-name');\n    let type = event.target.getAttribute('data-type');\n\n    this.setState({\n      edit_id: event.target.getAttribute('data-id')\n    }, function () {\n\n      let form = document.querySelector('#editForm');\n\n      form.children[0].value = name;\n      form.children[1].value = type;\n\n    })\n\n\n  }\n\n  hideEditForm = (event) => {\n    event.preventDefault();\n\n    this.setState({ edit_id: \"\" })\n  }\n\n  signUp = (event) => {\n    event.preventDefault();\n\n    let inputs = event.target.children;\n\n    let username = inputs[0].value;\n    let password = inputs[2].value;\n    let passwordConf = inputs[4].value;\n\n    if (password === passwordConf) {\n\n      return _signUp(username, password).then(res => {\n        // this.setState({ userID })\n        console.log(res);\n        alert(res.message)\n      });\n\n    } else {\n      alert('your password and password confirmation have to match!')\n    }\n\n  }\n\n  login = (event) => {\n    event.preventDefault();\n\n    let inputs = event.target.children;\n\n    let username = inputs[0].value;\n    let password = inputs[2].value;\n\n\n    return _login(username, password).then(res => {\n      if (res.token) {\n        this.setState({ logged_in: true }, function () {\n          localStorage.setItem('token', res.token);\n          this.setState({ name: username })\n        });\n      } else {\n        alert('you were not logged in')\n      }\n    });\n  }\n\n  logout = (event) => {\n    event.preventDefault();\n\n    this.setState({ logged_in: false }, function () {\n      localStorage.removeItem('token');\n    });\n    this.setState({\n      name: 'Welcome',\n      show_log_in: false\n    })\n  }\n\n  show_log_in = (event) => {\n    event.preventDefault();\n    if (this.state.show_log_in == false) {\n      this.setState({ show_log_in: true })\n    } else { this.setState({ show_log_in: false }) }\n    this.setState({ show_sign_up: false })\n  }\n\n  show_sign_up = (event) => {\n    event.preventDefault();\n    if (this.state.show_sign_up == false) {\n      this.setState({ show_sign_up: true })\n    } else { this.setState({ show_sign_up: false }) }\n    this.setState({ show_log_in: false })\n  }\n\n  switchImage() {\n    if (this.state.countup < 5) {\n      this.setState({\n        countup: this.state.countup + 1\n      });\n    } else {\n      this.setState({\n        countup: 0\n      });\n    }\n    return this.countup;\n  }\n\n  componentDidMount() {\n    setInterval(this.switchImage, 1000);\n    return _loadPets()\n      .then(resultingJSON => this.setState({ pets: resultingJSON }))\n\n  }\n\n  /*\n  componentDidMount () {\n    setInterval((function() {\n      this.setState({\n        currentImage: this.getRandomImageId()\n      });\n    })(), 5000)\n  }\n*/\n\n\n\n\n\n\n\n  render() {\n    return (\n      <div className=\"App\">\n        <header>\n          {/* <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>\n            Edit <code>src/App.js</code> and save to reload. {this.state.edit_id}\n          </p> */}\n          <h1>{this.state.countup}</h1>\n          <h1>{this.state.name}</h1>\n\n          <div class='nav'>\n\n            {!this.state.logged_in &&\n              <div>\n\n                <div>\n                  <form id=\"showsignup\" onSubmit={this.show_sign_up}>\n                    <button>Sign Up</button>\n                  </form>\n\n                </div>\n\n                {this.state.show_sign_up &&\n                  <div>\n                    <h2>Sign Up</h2>\n\n                    <form id=\"signUpForm\" onSubmit={this.signUp}>\n                      <input type=\"text\" name=\"username\" placeholder=\"put in a username\" />\n                      <br></br>\n                      <input type=\"password\" name=\"password\" placeholder=\"put in a password\" />\n                      <br></br>\n                      <input type=\"password\" name=\"password\" placeholder=\"confirm your password\" />\n                      <br></br>\n                      <button>Confirm</button>\n                    </form>\n                    <br></br>\n                  </div>}\n\n\n\n                <div>\n                  <form id=\"showlogin\" onSubmit={this.show_log_in}>\n                    <button>Log In</button>\n                  </form>\n\n                </div>\n\n\n                {this.state.show_log_in &&\n                  <div>\n                    <h2>Log In</h2>\n\n                    <form id=\"logInForm\" onSubmit={this.login}>\n                      <input type=\"text\" name=\"username\" placeholder=\"put in a username\" />\n                      <br></br>\n                      <input type=\"password\" name=\"password\" placeholder=\"put in a password\" />\n                      <br></br>\n                      <button>Confirm</button>\n                    </form>\n                    <br></br>\n                  </div>}\n\n                <br /><br /><br />\n              </div>}\n\n            {this.state.logged_in &&\n\n              <div>\n                <h2>Sign Out</h2>\n\n                <form id=\"logOutForm\" onSubmit={this.logout}>\n                  <button>Log Out</button>\n                </form>\n\n                <br /><br /><br />\n              </div>}\n          </div>\n\n          {this.state.logged_in && this.state.pets.map((x) => <Pet _id={x._id} name={x.name} type={x.type} delete={this.deletePet} edit={this.editPet} />)}\n\n          {!this.state.logged_in && this.state.pets.map((x) => <ShortPet _id={x._id} name={x.name} type={x.type} />)}\n\n          {this.state.logged_in && <Form func={this.createPet} submitButton=\"make pet\" />}\n\n          {(this.state.edit_id !== \"\") && this.state.logged_in && <Form cssId=\"editForm\" func={this.updatePet} submitButton=\"update pet\" />}\n\n          {(this.state.edit_id !== \"\") && this.state.logged_in && <a href=\"#\" onClick={this.hideEditForm}>hide edit form</a>}\n\n\n\n\n        </header>\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}